resources:
  jobs:
    pdf_ingestion_benchmark:
      name: pdf_ingestion_benchmark
      job_clusters:
        - job_cluster_key: de_project
          new_cluster:
            spark_version: 15.4.x-scala2.12
            node_type_id: i3.2xlarge
            num_workers: 20
            aws_attributes:
              first_on_demand: 1
              zone_id: us-west-2a
              availability: SPOT_WITH_FALLBACK
              spot_bid_price_percent: 100
            runtime_engine: PHOTON
            data_security_mode: SINGLE_USER
      tasks:
        - task_key: Bronze_pdf_file_ingestion
          job_cluster_key: de_project
          max_retries: 2
          webhook_notifications: {}
          run_if: ALL_SUCCESS
          email_notifications: {}
          notebook_task:
            notebook_path: ../src/Bronze-pdf_batch_ingestion_binary_foreachbatch.py
            source: WORKSPACE
        - task_key: Silver_pdf_content_parsing_extraction
          depends_on:
            - task_key: Bronze_pdf_file_ingestion
          job_cluster_key: de_project
          email_notifications: {}
          min_retry_interval_millis: 300000
          notebook_task:
            notebook_path: ../src/Silver-pdf_batch_ingestion_binary_foreachbatch.py
            source: WORKSPACE
          webhook_notifications: {}
          max_retries: 2
          run_if: ALL_SUCCESS
      queue:
        enabled: true
      webhook_notifications: {}
      max_concurrent_runs: 1
      email_notifications: {}
      parameters:
        - default: qyu_test
          name: catalog
        - default: checkpoints
          name: checkpoints_volume
        - default: "true"
          name: reset_data
        - default: genai_pdf_workflow
          name: schema
        - default: my_project
          name: table_prefix
        - default: pdf_batch
          name: volume
